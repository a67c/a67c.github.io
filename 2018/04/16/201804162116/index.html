<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="google-site-verification" content="xBT4GhYoi5qRD5tr338pgPM5OWHHIDR6mNg1a3euekI" />
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="进击的程序茗">
    <meta name="keyword"  content="">
    <link rel="shortcut icon" href="/img/bing.jpeg">
    <script>
    var _hmt = _hmt || [];
    (function() {
        var hm = document.createElement("script");
        hm.src = "https://hm.baidu.com/hm.js?365f8ba6d7b144150d8c71be001446ec";
        var s = document.getElementsByTagName("script")[0]; 
        s.parentNode.insertBefore(hm, s);
    })();
    </script>
        
    <title>
        
        我们仍未知道那天wda为什么没有被启动 - 进击的程序茗
        
    </title>

    <!-- Custom CSS -->
    <link rel="stylesheet" href="/css/aircloud.css">
    <link rel="stylesheet" href="/css/gitment.css">
    <!--<link rel="stylesheet" href="https://imsun.github.io/gitment/style/default.css">-->
    <link href="//at.alicdn.com/t/font_620856_pl6z7sid89qkt9.css" rel="stylesheet" type="text/css">
    <!-- ga & ba script hoook -->
    <script></script>
</head>

<body>

<div class="site-nav-toggle" id="site-nav-toggle">
    <button>
        <span class="btn-bar"></span>
        <span class="btn-bar"></span>
        <span class="btn-bar"></span>
    </button>
</div>

<div class="index-about">
    <i> welcome </i>
</div>

<div class="index-container">
    
    <div class="index-left">
        
<div class="nav" id="nav">
    <div class="avatar-name">
        <div class="avatar">
            <img src="/img/bing.jpeg" />
        </div>
        <div class="name">
            <i>进击的程序茗</i>
        </div>
    </div>
    <div class="contents" id="nav-content">
        <ul>
            <li >
                <a href="/">
                    <i class="iconfont icon-shouye1"></i>
                    <span>主页</span>
                </a>
            </li>
            <li >
                <a href="/tags">
                    <i class="iconfont icon-biaoqian1"></i>
                    <span>标签</span>
                </a>
            </li>
            <li >
                <a href="/archive">
                    <i class="iconfont icon-guidang2"></i>
                    <span>存档</span>
                </a>
            </li>
            <li >
                <a href="/about/">
                    <i class="iconfont icon-guanyu2"></i>
                    <span>关于</span>
                </a>
            </li>
            
            <li>
                <a id="search">
                    <i class="iconfont icon-sousuo1"></i>
                    <span>搜索</span>
                </a>
            </li>
            
        </ul>
    </div>
    
        <div id="toc" class="toc-article">
    <ol class="toc"><li class="toc-item toc-level-4"><a class="toc-link" href="#1-appium报错说明："><span class="toc-text">1.appium报错说明：</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-socket-hang-up"><span class="toc-text">2.socket hang up</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-找不到证书"><span class="toc-text">3.找不到证书</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#4-找不到设备"><span class="toc-text">4.找不到设备</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#httplib-BadStatusLine"><span class="toc-text">httplib.BadStatusLine</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#5-Too-many-instances"><span class="toc-text">5.Too many instances</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#6-A-session-is-either-terminated-or-not-started"><span class="toc-text">6.A session is either terminated or not started</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#7-wda没有启动"><span class="toc-text">7.wda没有启动</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#8-xcodebuild65"><span class="toc-text">8.xcodebuild65</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#总结"><span class="toc-text">总结</span></a></li></ol>
</div>
    
</div>


<div class="search-field" id="search-field">
    <div class="search-container">
        <div class="search-input">
            <span id="esc-search"> <i class="icon-fanhui iconfont"></i></span>
            <input id="search-input"/>
            <span id="begin-search">搜索</span>
        </div>
        <div class="search-result-container" id="search-result-container">

        </div>
    </div>
</div>
        <div class="index-about-mobile">
            <i> welcome </i>
        </div>
    </div>
    
    <div class="index-middle">
        <!-- Main Content -->
        


<div class="post-container">
    <div class="post-title">
        我们仍未知道那天wda为什么没有被启动
    </div>

    <div class="post-meta">
        <span class="attr">发布于：<span>2018-04-16 21:16:24</span></span>
        
        <span class="attr">标签：/
        
        <a class="tag" href="/tags/#Appium" title="Appium">Appium</a>
        <span>/</span>
        
        
        </span>
        <span class="attr">访问：<span id="busuanzi_value_page_pv"></span>
</span>
</span>
    </div>
    <div class="post-content ">
        <p> 这是一篇废话连篇的佛系记录，本文主要为appium+wda测试app过程中遇到的问题</p>
<h4 id="1-appium报错说明："><a href="#1-appium报错说明：" class="headerlink" title="1.appium报错说明："></a>1.appium报错说明：</h4><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">urllib2.URLError: &lt;urlopen <span class="builtin-name">error</span> [Errno 61]<span class="built_in"> Connection </span>refused&gt;</span><br></pre></td></tr></table></figure>
<p>该问题为什么会发生至今仍不知道，一方面说是当前appium服务端没有被启动，但是在appium服务端启动之后仍曾经遇到过这个问题，无组织无纪律2%的概率复现。</p>
<p><strong>当前解决方式:通过增加重试次数重启appium</strong></p>
<h4 id="2-socket-hang-up"><a href="#2-socket-hang-up" class="headerlink" title="2.socket hang up"></a>2.socket hang up</h4><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Could <span class="keyword">not</span><span class="built_in"> proxy </span>command <span class="keyword">to</span> remote server. Original error: Error: socket hang up</span><br></pre></td></tr></table></figure>
<p>appium服务端挂起，该问题由于appium服务端什么原因导致尚未查明，每隔一段时间总会hang up一次。<br><strong>假装解决方式：选择在python脚本中对其异常进行捕获</strong><br>但是这个问题总是要查的……</p>
<h4 id="3-找不到证书"><a href="#3-找不到证书" class="headerlink" title="3.找不到证书"></a>3.找不到证书</h4><figure class="highlight subunit"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">Error: </span>App with bundle identifier 'xxxxxx'</span><br></pre></td></tr></table></figure>
<p>遇到这个问题一种是真的证书写错了，另一种，在程序执行了好久后报这个错误那就非常奇怪了……奇怪到至今也没有查到这个问题，但可以确定的是，随着mac连接设备不再频繁掉设备后，这个问题也逐渐减少了。</p>
<h4 id="4-找不到设备"><a href="#4-找不到设备" class="headerlink" title="4.找不到设备"></a>4.找不到设备</h4><figure class="highlight vhdl"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Message: An unknown server-<span class="literal">side</span> <span class="literal">error</span> occurred <span class="keyword">while</span> processing the command. Original <span class="literal">error</span>: Unknown device <span class="keyword">or</span> simulator UDID: <span class="symbol">'balabalabalalbas</span>'</span><br></pre></td></tr></table></figure>
<p>大意就是找不到设备，尤其是在程序执行一段时间后失败了，失败原因找不到设备，就好像之前执行的一个小时都在闹着玩一样。<br>此时ituns会弹出各种弹框：eg’当前找不到该设备’ ‘无法像该设备传输信息’<br>所以简单粗暴的认为是设备掉线了，后来更换了HUB之后，该问题果然减少了！<strong>更换HUB</strong>之后连带着找不到证书的问题也<strong>果然</strong>减少了！</p>
<h4 id="httplib-BadStatusLine"><a href="#httplib-BadStatusLine" class="headerlink" title="httplib.BadStatusLine"></a>httplib.BadStatusLine</h4><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">raise BadStatusLine(line) httplib<span class="selector-class">.BadStatusLine</span>: <span class="string">''</span></span><br></pre></td></tr></table></figure>
<p>网上查说是你的python请求中断啊，但是为什么会中断！网络好好的，什么都好好的，后来终于确定了现场，那就是报出该问题时99%是app证书没有被信任，暂定就破案吧。</p>
<h4 id="5-Too-many-instances"><a href="#5-Too-many-instances" class="headerlink" title="5.Too many instances"></a>5.Too many instances</h4><figure class="highlight applescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Too many instances <span class="keyword">of</span> this services are already <span class="built_in">running</span></span><br></pre></td></tr></table></figure>
<p>如果你的appium日志经常阵亡在wda启动时，满屏都是wda报错的日志时，不妨从xcodebuild中启动一下wda，经常会出现这个错误！除了重启手机别无它法。</p>
<h4 id="6-A-session-is-either-terminated-or-not-started"><a href="#6-A-session-is-either-terminated-or-not-started" class="headerlink" title="6.A session is either terminated or not started"></a>6.A session is either terminated or not started</h4><figure class="highlight delphi"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">WebDriverException: <span class="keyword">Message</span>: A session <span class="keyword">is</span> either terminated <span class="keyword">or</span> <span class="keyword">not</span> started</span><br></pre></td></tr></table></figure>
<p>大概就是当前的session已经停止了，再去连接是连接不上的，捕获到这种异常后，进行了appium重新请求，即重新建立appium与wda，wda与手机的session</p>
<h4 id="7-wda没有启动"><a href="#7-wda没有启动" class="headerlink" title="7.wda没有启动"></a>7.wda没有启动</h4><figure class="highlight stata"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">WebDriverException: Message: <span class="keyword">An</span> unknown server-side <span class="keyword">error</span> occurred <span class="keyword">while</span> processing the command. Original <span class="keyword">error</span>: <span class="keyword">An</span> <span class="keyword">error</span> occurred</span><br></pre></td></tr></table></figure>
<p>element找不到，当前发送的命令webdriver中没有，都可能导致这个问题</p>
<h4 id="8-xcodebuild65"><a href="#8-xcodebuild65" class="headerlink" title="8.xcodebuild65"></a>8.xcodebuild65</h4><p>这个问题范围太广了，wda没有启动成功时，基本是成片的’xcodebuild 65’<br>且如果你上次执行失败导致xcodebuild65 and wda remove，之后的执行基本也是失败的。此时主要是通过xcodebuild重启wda来尽量避免成片出现这种错误。<br>当前可以确定的是：<br>手机弹出未安装sim卡，手机弹出alertView弹窗，手机未被信任都会阻止wda的启动。<br>重启手机，通过xcodebuild重启wda可以有效减少此类问题发生，但是可能不能避免。</p>
<h4 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h4><p>重启手机、重启wda、避免手机电量不足而导致重新信任电脑、增加appium启动重试次数、更换硬件设备、对于异常进行捕获而非抛出，大概就是以上要表达的全部意思。</p>

        
        <div id="comment-container">
        </div>
    </div>
</div>
    </div>
</div>


<footer class="footer">
    <ul class="list-inline text-center">
        
        

        

        

        

        

    </ul>
    
    <p>
        <!-- <span id="busuanzi_container_site_pv">
            <span id="busuanzi_value_site_pv"></span>PV
        </span>
        <span id="busuanzi_container_site_uv">
            <span id="busuanzi_value_site_uv"></span>UV
        </span> -->
        Created By <a href="https://hexo.io/">Hexo</a>  Theme <a href="https://github.com/aircloud/hexo-theme-aircloud">AirCloud</a></p>
</footer>




</body>

<script>
    // We expose some of the variables needed by the front end
    window.hexo_search_path = "search.json"
    window.hexo_root = "/"
    window.isPost = true
</script>
<script src="https://cdn.bootcss.com/jquery/3.3.1/jquery.min.js"></script>
<script src="/js/index.js"></script>
<script async src="//dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js"></script>

<script src="/js/gitment.js"></script>
<script>
    var gitment = new Gitment({
        id: '201804162116',
        owner: 'a67c',
        repo: 'a67c_cmt',
        oauth: {
            client_id: '5f30ddfa7cc1a3ed7e3a',
            client_secret: 'a2fb0816fa4ac0af72397c0e6222df36d2c053d6',
        },
    })
    gitment.render('comment-container')
</script>

</html>
